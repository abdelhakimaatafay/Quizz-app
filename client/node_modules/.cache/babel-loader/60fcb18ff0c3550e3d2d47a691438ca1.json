{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\21276\\\\Desktop\\\\Quizz-app\\\\client\\\\src\\\\components\\\\Profile\\\\Profile.js\";\nimport React from 'react';\nimport axios from 'axios';\nimport Sidebar from '../Sidebar/Sidebar';\nimport Toast from '../Toast/Toast';\nimport './Profile.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class Profile extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.getUser = () => {\n      let id = localStorage.getItem('_ID');\n\n      if (!id) {\n        this.props.history.push('/');\n        localStorage.clear();\n      }\n\n      axios.get('/api/users/' + id).then(res => {\n        this.setState({\n          user: res.data.user\n        });\n      });\n    };\n\n    this.handleFileInputChange = e => {\n      const file = e.target.files[0];\n\n      if (!this.state.fileTypes.includes(file.type)) {\n        this.setState({\n          message: 'Must be either jpg, pdf, or png'\n        });\n      } else {\n        this.setState({\n          message: ''\n        });\n        this.previewFile(file);\n      }\n    };\n\n    this.previewFile = file => {\n      if (file.size > 10000000) {\n        this.setState({\n          message: 'File size too big'\n        });\n        return;\n      }\n\n      const reader = new FileReader();\n      reader.readAsDataURL(file);\n\n      reader.onloadend = () => {\n        this.setState({\n          previewSource: reader.result\n        });\n      };\n    };\n\n    this.handleSubmitFile = e => {\n      e.preventDefault();\n      if (this.state.message.length > 0 || !this.state.previewSource || Object.keys(this.state.user) < 1) return;\n      axios.post('/api/users/upload-image', JSON.stringify({\n        data: this.state.previewSource,\n        _id: this.state.user._id\n      })).then(res => {\n        if (res.data && res.data.message) {\n          this.setState({\n            message: res.data.message,\n            fileInput: '',\n            previewSource: '',\n            showPopup: true\n          });\n        } else {\n          this.setState({\n            fileInput: '',\n            previewSource: '',\n            message: 'Success',\n            showPopup: true\n          });\n        }\n\n        this.getUser();\n      }).catch(err => {\n        console.log(err);\n        this.setState({\n          showPopup: true,\n          message: 'Something went wrong uploading image'\n        });\n      });\n    };\n\n    this.state = {\n      user: null,\n      previewSource: '',\n      message: '',\n      showToast: false,\n      fileTypes: ['jpg', 'pdf', 'png', 'jpeg', 'image/jpg', 'image/pdf', 'image/png', 'image/jpeg']\n    };\n  }\n\n  componentDidMount() {\n    this.getUser();\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile-wrapper\",\n      children: [/*#__PURE__*/_jsxDEV(Toast, {\n        model: this.state.showToast,\n        messsage: this.state.message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(Sidebar, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"body\",\n        children: this.state.user && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cards\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"left\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"img-uploader\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: \"Upload Avatar Image\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 103,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"upload-box\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  onChange: e => this.handleFileInputChange(e),\n                  type: \"file\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 105,\n                  columnNumber: 41\n                }, this), this.state.previewSource ? /*#__PURE__*/_jsxDEV(\"img\", {\n                  className: \"display-image\",\n                  src: this.state.previewSource\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 107,\n                  columnNumber: 45\n                }, this) : this.state.user.avatar && this.state.user.avatar.url ? /*#__PURE__*/_jsxDEV(\"img\", {\n                  style: {\n                    borderRadius: '50%',\n                    objectFit: 'cover',\n                    margin: '20px auto 0 25px',\n                    width: '25vw',\n                    height: '25vw'\n                  },\n                  className: \"display-image\",\n                  src: this.state.user.avatar.url\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 108,\n                  columnNumber: 103\n                }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n                  className: \"display-image\",\n                  src: this.state.previewSource\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 108,\n                  columnNumber: 282\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 104,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: this.state.message === 'Success' ? 'green' : 'red',\n                  fontSize: '.8em',\n                  margin: '20px 0'\n                },\n                children: this.state.message\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 110,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"image-btn\",\n                style: {\n                  marginTop: '20px'\n                },\n                onClick: e => this.handleSubmitFile(e),\n                children: \"Save\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 111,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["C:/Users/21276/Desktop/Quizz-app/client/src/components/Profile/Profile.js"],"names":["React","axios","Sidebar","Toast","Profile","Component","constructor","props","getUser","id","localStorage","getItem","history","push","clear","get","then","res","setState","user","data","handleFileInputChange","e","file","target","files","state","fileTypes","includes","type","message","previewFile","size","reader","FileReader","readAsDataURL","onloadend","previewSource","result","handleSubmitFile","preventDefault","length","Object","keys","post","JSON","stringify","_id","fileInput","showPopup","catch","err","console","log","showToast","componentDidMount","render","avatar","url","borderRadius","objectFit","margin","width","height","color","fontSize","marginTop"],"mappings":"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","sourcesContent":["import React from 'react';\nimport axios from 'axios';\n\nimport Sidebar from '../Sidebar/Sidebar';\nimport Toast from '../Toast/Toast';\nimport './Profile.css';\n\nexport default class Profile extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            user: null,\n            previewSource: '',\n            message: '',\n            showToast: false,\n            fileTypes: ['jpg', 'pdf', 'png', 'jpeg', 'image/jpg', 'image/pdf', 'image/png', 'image/jpeg']\n        }\n    }\n\n    componentDidMount() {\n        this.getUser();\n    }\n\n    getUser = () => {\n        let id = localStorage.getItem('_ID');\n        if (!id) {\n            this.props.history.push('/');\n            localStorage.clear();\n        }\n        axios.get('/api/users/' + id).then((res) => {\n            this.setState({user: res.data.user})\n        })\n    }\n\n    handleFileInputChange = e => {\n        const file = e.target.files[0];\n        if(!this.state.fileTypes.includes(file.type)) {\n            this.setState({\n                message: 'Must be either jpg, pdf, or png'\n            })\n        } else {\n            this.setState({\n                message: ''\n            })\n            this.previewFile(file);\n        }\n    }\n\n    previewFile = (file) => {\n        if(file.size > 10000000) {\n            this.setState({message: 'File size too big'});\n            return;\n        }\n        const reader = new FileReader();\n        reader.readAsDataURL(file);\n        reader.onloadend = () => {\n            this.setState({ previewSource: reader.result });\n        }\n    }\n\n    handleSubmitFile = (e) => {\n        e.preventDefault();\n            if(this.state.message.length > 0 || !this.state.previewSource || Object.keys(this.state.user) < 1) return;\n            axios.post('/api/users/upload-image', JSON.stringify({\n                data: this.state.previewSource, \n                _id: this.state.user._id\n            })).then((res) => {\n                if(res.data && res.data.message) {\n                    this.setState({\n                        message: res.data.message,\n                        fileInput: '',\n                        previewSource: '',\n                        showPopup: true\n                    });\n                } else {\n                    this.setState({\n                        fileInput: '',\n                        previewSource: '',\n                        message: 'Success',\n                        showPopup: true\n                    })\n                }\n                this.getUser();\n            }).catch((err) => {\n                console.log(err);\n                this.setState({showPopup: true, message: 'Something went wrong uploading image'})\n            })\n    }\n\n    render() {\n        return (\n            <div className=\"profile-wrapper\">\n                <Toast model={this.state.showToast} messsage={this.state.message} />\n                <div>\n                    <Sidebar />\n                </div>\n\n                <div className=\"body\">\n                    {this.state.user &&\n                        <div className=\"cards\">\n                            <div className=\"left\">\n                                <div className=\"img-uploader\">\n                                    <div>Upload Avatar Image</div>\n                                    <div className=\"upload-box\">\n                                        <input onChange={(e) => this.handleFileInputChange(e)} type=\"file\" />\n                                        {this.state.previewSource ?\n                                            <img className=\"display-image\" src={this.state.previewSource} />\n                                            : (this.state.user.avatar && this.state.user.avatar.url ? <img style={{borderRadius: '50%', objectFit: 'cover', margin: '20px auto 0 25px', width: '25vw', height: '25vw'}} className=\"display-image\" src={this.state.user.avatar.url} />  : <img className=\"display-image\" src={this.state.previewSource} /> )}\n                                    </div>\n                                    <div style={{color: this.state.message === 'Success' ? 'green' : 'red', fontSize: '.8em', margin: '20px 0'}}>{ this.state.message }</div>\n                                    <button className=\"image-btn\" style={{marginTop: '20px'}} onClick={(e) => this.handleSubmitFile(e)}>Save</button>\n                                </div>\n                            </div>\n                        </div>\n                    }\n                </div>\n            </div>\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}